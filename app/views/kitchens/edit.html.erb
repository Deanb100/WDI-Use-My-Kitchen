<h1>Update kitchen details</h1>
<form id="kitchen-form">
  <input id="kitchen-id" value="<%= @kitchen.id %>" type="hidden">
  <div>
    <label for="title">Title</label>
    <input id="title" value="<%= @kitchen.title %>" name="title" type="text">
  </div>
  <div>
    <label for="address">Address</label>
    <input id="address" value="<%= @kitchen.address %>" name="address" type="text">
  </div>
  <div>
    <label for="suburb">Suburb</label>
    <input id="suburb" value="<%= @kitchen.suburb %>" name="suburb" type="text">
  </div>
  <div>
    <label for="postcode">Postcode</label>
    <input id="postcode" value="<%= @kitchen.postcode %>" name="postcode" type="text">
  </div>
  <div>
    <label for="state">State</label>
    <input id="state" value="<%= @kitchen.state %>" name="state" type="text">
  </div>
  <div>
    <label for="country">Country</label>
    <input id="country" value="<%= @kitchen.country %>" name="country" type="text">
  </div>
  <div>
    <label for="description">Description</label>
    <input id="description" value="<%= @kitchen.description %>" name="description" type="text">
  </div>
  <div>
    <label for="capacity">Capacity</label>
    <input id="capacity" value="<%= @kitchen.capacity %>" name="capacity" type="text">
  </div>
  <div>
    <label for="fee">Fee</label>
    <input id="fee" value="<%= @kitchen.fee %>" name="fee" type="text">
  </div>
  <button>Save changes</button>
</form>

<script>
  $('#kitchen-form').submit(function(e) {
    e.preventDefault();
    var id = $('#kitchen-id').val();

    $.ajax({
      url: '/api/kitchens/' + id,
      method: 'patch',
      data: {
        title: $('#title').val(),
        address: $('#address').val(),
        suburb: $('#suburb').val(),
        postcode: $('#postcode').val(),
        state: $('#state').val(),
        country: $('#country').val(),
        description: $('#description').val(),
        capacity: $('#capacity').val(),
        fee: $('#fee').val(),
        authenticity_token: '<%= form_authenticity_token %>',
      }
    }).done(function(res) {
      // Redirect to kitchen details on success
      if (res.success) {
        window.location = '/kitchens/' + res.result;
      }
      else {
        // TODO: Display errors
        console.log(res);
      }
    });
  });
</script>
